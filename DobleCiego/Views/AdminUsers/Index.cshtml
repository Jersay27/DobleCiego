@model IEnumerable<DobleCiego.Models.T_Usuarios>
@{
    ViewBag.Title = "Index";
}

<h2>Administrar Usuarios</h2>
<br />
@Html.ActionLink("Crear Usuario", "addUser", "", new { @class = "btn btn-primary btn-cons" })

<div>
    <br />

    <table id="myTable" class="table align-middle mb-0 bg-white">
        <thead class="bg-light">
            <tr>
                <th>Nombre</th>
                <th>Genero</th>
                <th>Fecha de Nacimiento</th>
                <th>Telefono</th>
                <th>Correo</th>
                <th>Rol</th>
                <th>Status</th>
                <th>Opciones</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>@item.Nombre @item.Apellido </td>
                    <td>@item.Sexo</td>
                    <td>@item.FechaNac.ToString("dd-MM-yyyy")</td>
                    <td>@item.Telefono</td>
                    <td>@item.Correo</td>
                    <td>@item.Rol</td>
                    <td>@item.Status</td>
                    <td>
                        @Html.ActionLink("Modificar", "modifyUser", new { id = item.IdUsuario }, new { @class = "btn btn-primary btn-cons" })
                        @Html.ActionLink("Eliminar", "deleteUser", new { id = item.IdUsuario }, new { @class = "btn btn-danger btn-cons" })
                    </td>

                </tr>
            }
        </tbody>
    </table>
</div>
<script>
    $(document).ready(function () {
    $('#myTable').dataTable({
        dom: 'Bfrtip',
        buttons: [
            'copy', 'csv', 'excel', 'pdf', 'print'
        ],
        pageLength: 12,
        responsive: true
    });

    var val = '@Html.Raw((string)TempData["Message"])';
    if (val == "Usuario agregado exitosamente")
    {
        toastr.success(val);
    }
    else if (val == "Se modifico el usuario") {
        toastr.success(val);
    }
    else if (val == "Se elimino el usuario") {
        toastr.success(val);
    }
    else if (val == "Correo en uso") {
        toastr.warning(val);
    }
    });


</script>