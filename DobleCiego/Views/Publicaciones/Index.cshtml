@model IEnumerable<DobleCiego.Models.T_Publicaciones>
@{
    ViewBag.Title = "Index";
}

<h2>Administrar Publicaciones</h2>
<br />
@Html.ActionLink("Crear Publicacion", "crearPublicacion", "", new { @class = "btn btn-primary btn-cons" })

<div>
    <br />

    <table id="MiTabla" class="table align-middle mb-0 bg-white">
        <thead class="bg-light">
            <tr>
                <th>Imagen</th>
                <th>Titulo</th>
                <th>Propuesta</th>
                <th>Creador</th>
                <th>Creacion</th>
                <th>Archivo</th>
                <th>Opciones</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td> <img src="@item.imgRef" alt="" height=100 width=200 /> </td>
                    <td>@item.Titulo</td>
                    <td>@item.Descripcion</td>
                    <td>@item.idUsuario_Creador</td>
                    <td>@item.CreationDate.ToString("dd-MM-yyyy")</td>
                    <td>  @Html.ActionLink("Descargar", "download", new { id = item.idPublicacion }, new { @class = "btn btn-primary btn-cons" })</td>
                    <td>
                        @Html.ActionLink("Modificar", "modificarPublicacion", new { id = item.idPublicacion }, new { @class = "btn btn-primary btn-cons" })
                        @Html.ActionLink("Eliminar", "deletePublicacion", new { id = item.idPublicacion }, new { @class = "btn btn-danger btn-cons" })
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
<script>
    $(document).ready(function () {
    var val = '@Html.Raw((string)TempData["Message"])';
    if (val == "Se aggrego una nueva publicacion")
    {
        toastr.success(val);
    }
    else if (val == "Se modifico la publicacion") {
        toastr.success(val);
    }
    else if (val == "Se elimino la publicacion") {
        toastr.success(val);
    }
    else if (val == "Error al guardar archivos") {
        toastr.warning(val);
    }
    });


</script>