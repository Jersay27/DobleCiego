@model IEnumerable<DobleCiego.Models.T_Titulos>
@{
    ViewBag.Title = "Index";
}

<h2>Administrar Convocatorias</h2>
<br />
@Html.ActionLink("Crear Convocatoria", "crearTitulo", "", new { @class = "btn btn-primary btn-cons" })

<div>
    <br />

    <table id="MiTabla" class="table align-middle mb-0 bg-white">
        <thead class="bg-light">
            <tr>
                <th>Imagen</th>
                <th>Convocatoria</th>
                <th>Propuesta</th>
                <th>Creador</th>
                <th>Creacion</th>
                <th>Status</th>
                <th>Archivo</th>
                <th>Opciones</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
            <tr>
                <td> <img src="@item.ImagenRef" alt="" height=100 width=200 /> </td>
                <td>@item.Titulo</td>
                <td>@item.Propuesta</td>
                <td>@item.idUsuario</td>
                <td>@item.CreationDate.ToString("dd-MM-yyyy")</td>
                <td>@item.Status</td>
                <td>  @Html.ActionLink("Descargar", "download", new { id = item.IdTitulo }, new { @class = "btn btn-primary btn-cons" })</td>
                <td>
                    @Html.ActionLink("Modificar", "ModificarTitulo", new { id = item.IdTitulo }, new { @class = "btn btn-primary btn-cons" })
                    @Html.ActionLink("Eliminar", "deleteTitle", new { id = item.IdTitulo }, new { @class = "btn btn-danger btn-cons" })
                </td>
            </tr>
            }
        </tbody>
    </table>
</div>
<script>
    $(document).ready(function () {
    var val = '@Html.Raw((string)TempData["Message"])';
    if (val == "Se aggrego un nuevo titulo")
    {
        toastr.success(val);
    }
    else if (val == "Se modifico el titulo") {
        toastr.success(val);
    }
    else if (val == "Se elimino el titulo") {
        toastr.success(val);
    }
    else if (val == "Error al guardar archivos") {
        toastr.warning(val);
    }
    });


</script>